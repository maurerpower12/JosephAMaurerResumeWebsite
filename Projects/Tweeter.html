<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
  <meta name="keywords" content="Software Engineer, Portfolio, Developer, Coding, C#, C++, Swift, Personal Website">
  <meta name="description" content="Portfolio for Joseph A Maurer, a Software Engineer in Reno, NV">
  <meta name="author" content="Joseph A Maurer">
  <link rel="icon" href="/favicon.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon">

  <title>Tweet Formatter</title>

  <!-- Bootstrap core CSS -->
  <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet">
  <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../css/resume.css" rel="stylesheet">

</head>

<body id="page-top">

  <div id="NavBarComponent">
    <!-- At runtime, nav bar component loads here -->
  </div>

  <div class="container-fluid p-0">

    <section class="resume-section p-3 p-lg-5 d-flex align-items-center" id="main">
      <div class="w-100">
        <h3>Tweet Formatter</h3>
        <p>The purpose of this form is to format a tweet from DEV to post on Twitter</p>
        <form>
          <div class="form-group">
            <label for="inputTweet">Input Tweet</label>
            <textarea class="form-control" id="inputTweet" rows="3"></textarea>
          </div>
          <button type="button" class="btn btn-primary mb-2" id="convert">Convert</button>
        </form>
        <div class="form-group">
          <label for="outputTweet">Output Tweet</label>
          <textarea class="form-control" id="outputTweet" rows="3" readonly></textarea>
        </div>
        <!-- <button type="button" class="btn btn-primary mb-2" id="tweetOutput">Tweet Output</button> -->
        <button class="btn btn-primary mb-2">
          <a id="tweetOutput" target="_blank" href="https://twitter.com/maurerpwer" rel="noopener" style="color:white;"><i class="fab fa-twitter"></i>
          </a>
        </button>

        <button type="button" class="btn btn-dark mb-2" id="copy"><i class="far fa-clipboard"></i></button>
      </div>
    </section>

    <div id="FooterComponent">
      <!-- At runtime, footer component loads here -->
    </div>
  </div>

  <!-- Bootstrap core JavaScript -->
  <script src="../vendor/jquery/jquery.min.js"></script>
  <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script>
    $('#NavBarComponent').load('../components/navigation.html', function() {
      $('#projectsNav').addClass("active");
    });
    $('#FooterComponent').load('../components/footer.html');

  // Script that does the parsing
  //"Title" by @author #DEVCommunity https://dev.to/link-to-article
  $('#convert').click(function () {
    var text = $('#inputTweet').val();
    if (text.length > 0) {
      console.log(text);
      var regex = RegExp(/(?<Title>\".*\").(?<by>by).(?<name>@\w*).(?<dev>#DEVCommunity).(?<link>.*)/, 'g', 'i', 'm');
      let result = regex.exec(text);
      console.log(result);

      var title = result[1].replaceAll('\"', '');
      $('#outputTweet').val(title + " " + result[5] + " via " + result[3]);
      $('#tweetOutput').attr('href', `https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${result[5]}&via=${result[3]}`);
    }
    else {
      alert("Nothing to Covert ðŸ˜–");
    }
  });

  $('#copy').click(function () { 
      /* Get the text field */
      var copyText = document.getElementById("outputTweet");

      /* Select the text field */
      copyText.select(); 
      copyText.setSelectionRange(0, 99999); /* For mobile devices */

      /* Copy the text inside the text field */
      document.execCommand("copy");

      /* Alert the copied text */
      $('#copy').html(`<i class="fas fa-clipboard-check"></i>`);
  });

  </script>
</body>

</html>